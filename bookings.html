<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

    <!-- Mobile Specific 
    ========================================================================= -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" />

    <!-- Title Tag
    ========================================================================= -->
    <title>Wildlands Collective</title>

    <!-- Browser Specical Files
    ========================================================================= -->
    <!--[if lt IE 9]><script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script><![endif]-->
    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    
    <!-- Site Favicon
    ========================================================================= -->
    <link rel="shortcut icon" href="#" title="Favicon" />

    <!-- WP HEAD
    ========================================================================= -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,900,700,500,300' rel='stylesheet' type='text/css'>    
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./assets/css/responsive.css">
    <link rel="stylesheet" href="./assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/css/woocommerce-modify.css">

    <link rel="stylesheet" href="./addendum.css">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.13.3/css/theme.default.css">
    <link rel="stylesheet" href="./customizable.css">


    <!-- Browser Specical File-->
    <!--[if IE 8]><link href="assets/css/ie8.css" rel="stylesheet" type="text/css" /><![endif]-->
    
    <!-- JavaScript -->
    <script src="./assets/js/jquery-1.9.1.min.js"></script>
    <script src="./assets/js/jquery.modernizr.js"></script>

    <script type='text/javascript' src='https://cdn.firebase.com/v0/firebase.js'></script>

    <script type='text/javascript' src='https://cdn.firebase.com/v0/firebase-simple-login.js'></script>


</head>
<body id="bookings" class="login-screen text">


<div class="body-outer-wrapper">
    <div id="body-wrapper" class="body-wrapper full-width-mode">
        
        <header id="header" class="header-container-wrapper contact-closed">

            <div class="top-bar-outer-wrapper">
                <div class="top-bar-wrapper container"></div>
            </div>

            <div class="header-outer-wrapper">
                <div class="header-wrapper container">
                    <div class="row">
                        <div class="twelve columns b0">
                            <div class="header-left left">
                                <div class="logo-wrapper">
                                    <h1><a href="./index.html"><img src="./assets/images/logo-black.png" alt="Wildlands Collective"></a></h1>
                                </div>
                            </div>
                            <div class="header-right right">
                                <a href="#" id="primary-nav-mobile-a" class="primary-nav-close">
                                    <span></span>
                                    Main Navigation
                                </a>
                                <nav id="primary-nav-mobile"></nav>
                               
                                <nav id="primary-nav-id" class="primary-nav slideMenu">
                                    <ul>
                                        <li><a href="index.html">Home</a></li>
                                        <li>
                                            <span class="concept">Concept</span>
                                            <ul class="concept">
                                              <li><a href="concept.html#overview">Overview</a></li>
                                              <li><a href="concept.html#why-wildlands">Why Wildlands</a></li>
                                              <li><a href="concept.html#why-community">Why Community</a></li>
                                              <li><a href="concept.html#why-lodging">Why Lodging</a></li>
                                              <li><a href="concept.html#faq">FAQ</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <span class="philosophy">Philosophy</span>
                                            <ul class="philosophy">
                                              <li><a href="philosophy.html#mission-statement">Mission Statement</a></li>
                                              <li><a href="philosophy.html#manifesto">Manifesto</a></li>
                                              <li><a href="philosophy.html#who-you-are">Who You Are</a></li>
                                              <li><a href="philosophy.html#why-wild">Why Wild</a></li>
                                              <li><a href="philosophy.html#sustainability">Sustainability</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="thoughts.html">Thoughts</a></li>
                                        <li><a href="destinations.html">Destinations</a></li>
                                        <li>
                                            <span>Info</span>
                                            <ul>
                                              <li><a href="team.html">Team</a></li>
                                              <li><a href="jobs.html">Jobs</a></li>
                                              <li><a href="partners.html">Partners</a></li>
                                              <li class="current-menu-item"><a href="news.html">News</a></li>
                                              <li><a href="contact.html">Contact</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </nav>
                                <div class="clear"></div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="clear"></div>
                    </div>
                </div><!-- END .header-wrapper -->
            </div><!-- END .header-outer-wrapper -->
        </header> <!-- END .header-container-wrapper -->

        <div class="titlebar-outer-wrapper">
           <div class="row">
                <div class="twelve columns b0">
                    <div class="titlebar-title">
                        <h1>Bookings List</h1>
                        <div class="titlebar-desc">&nbsp;</div>
                        <div class="titlebar-author">&nbsp;</div>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="shadow-box"></div>
        </div>

        <div id="login-form">
            <h1>Bookings List</h1>
            <p>
                <input id="token" type="text" value="On6rs63cEBwx7ZeDwyjnRyXFPMJqJ0x2AkV2dSFL" placeholder="Key">
                <input id="fbrepo" type="hidden" value="https://wlc.firebaseio.com" placeholder="Repository">
            </p>
            <p><input type="submit" class="button" value="Login" onclick="load()" ></p>
        </div>

        <div class="main-outer-wrapper no-overlap">
            <div class="main-wrapper container">
                <div class="row row-wrapper">
                    <div class="page-outer-wrapper">
                        <div class="page-wrapper twelve columns no-sidebar b0">
                        

                            <div class="row">

                                <div class="content-wrapper twelve columns">
                                    
                                    <div id="post-ID" class="post-CLASS blog-post-item-single b30">
                                       

                                        <table id="bookings-list" class="tablesorter-default"></table>
                                        
                                    </div>

                                </div> 

                                <div class="clear"></div>
                            </div> <!-- END .row -->



                        </div> <!-- END .page-wrapper -->
                        <div class="clear"></div>

                    </div> <!-- END .page-outer-wrapper -->
                </div>
            </div> <!-- END .main-wrapper -->

        </div>  <!-- END .main-outer-wrapper -->


    </div><!-- END .body-wrapper -->
</div><!-- END .body-outer-wrapper -->
    
    <script src="./assets/js/fireform.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.13.3/jquery.tablesorter.min.js"></script>


    <script>
        
        var load=function(){


            var token = jQuery('#token').val();

            var fbrepo = jQuery('#fbrepo').val();

            var dataRef = new Firebase(fbrepo);


        
            dataRef.auth(token, function(error) {
              if(error) {
                console.log("Login Failed!", error);
              } else {
                console.log("Login Succeeded!");
                jQuery('body').removeClass('login-screen').addClass('logged-in');
              }
            });

            
            dataRef.on('value', function(snapshot) {

                var list=snapshot.val();
                var table = jQuery("#bookings-list");

                jQuery("#bookings-list").html("");


                for (i in list) {

                    var item = list[i];
                    var row=jQuery("<tr>");
                    var rowFirst=jQuery("<tr>");

                    for (var j in item) {
                        var col = jQuery("<td>");
                        col.html(item[j]);
                        row.append(col);

                        var colFirst = jQuery("<th>");
                        colFirst.html(j);
                        rowFirst.append(colFirst);
                           
                        console.log("updating");
                        table.trigger("update").trigger("appendCache");
  
                    };

                    table.prepend(row);
                    
                };

                table.prepend("<thead></thead>");
                jQuery("#bookings-list thead").prepend(rowFirst);
                table.tablesorter();

            });

        }

    </script>
    
    <script src="./assets/js/ddsmoothmenu.js"></script>
    <script src="./assets/js/purl.js"></script>

    <script src="./assets/js/nav.js"></script>

</body>
</html>